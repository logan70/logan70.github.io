---
layout: post
title:  "Node.js入门-5-数据库MongoDB"
categories: Node
date:   2018-07-26 11:48:05
author: Logan
tags:  node.js
---

* content
{:toc}

# 一、 数据库

## 1. 基本概念

数据库就是按照一定的数据结构来组织、存储和管理数据的仓库

> 我们写的程序都是在内存中运行的，一旦程序运行结束或者计算机断电，内存中的数据都会全部丢失。所以我们就需要将一些程序运行的数据持久化到硬盘之中，以确保数据的安全性。

数据库是大批量数据持久化的普遍选择。**优点**如下：

- 1. 数据库是有结构的，数据与数据之间可以建立各种关系，类似网状拓扑图。
- 2. 数据库能够提供各种接口，让数据的处理（增删改查操作）变得快捷简单。
- 3. 给各种语言（PHP、jsp、.net等）提供了完善的接口





## 2. 数据库分类

### 第一类：关系型数据库（RDBMS）

关系型数据库通过一张张表来建立关联

基本上都是用SQL(structure query language)语言来管理数据库

### 第二类：非关系型数据库（NoSQL）

**Not only SQL**

- 没有行、列的概念；用JSON来存储数据。集合就相当于“表”，文档就相当于“行”。
- 关系型数据库和非关系型数据库就是标准化和非标准化的摩擦，标准化限制创新，非标准化不能统一。

**分类**

- 键值(Key-Value)存储数据库
- 列存储数据库
- 文档型数据库
- 图形(Graph)数据库

### 区分

- 关系型数据库比较结构化，操作不是很灵活
- 非关系型数据库操作灵活，但是不适合大型数据存储，比较适合微架构
- 两者是相互辅助的关系

**非关系型数据库的适用场景**

- 1. 数据模型比较简单
- 2. 需要灵活性更强的后台系统
- 3. 对数据库性能要求较高
- 4. 不需要高度的数据一致性

# 二、MongoDB

## 1. 简介

- MongoDB是为快速开发互联网Web应用而设计的数据库系统。
- MongoDB的设计目标是极简、灵活，经常在Web应用栈的业务层被运用。
- MongoDB的数据模型是面向文档的，类似于JSON的结构。MongoDB这个数据库中存的是各种各样的BSON

## 2. 安装

[下载地址](https://logan70.github.io/)

> MongoDB的偶数版本为稳定版，奇数版本为开发版<br/>
> MongoDB对于32位系统支持不佳，所以3.2版本以后没有再对32位系统的支持

**第一步** ： 安装MongoDB的数据库服务器

**第二步** ： 配置环境变量

- 我的电脑 -> 属性 -> 高级系统设置 -> 高级 -> 环境变量 -> 系统变量 -> Path -> 编辑 -> 新建
- 输入MongoDB安装目录，保存。例如`C:\Program Files\MongoDB\Server\4.0\bin`
- 确定、保存

**第三步** ： 在C盘根目录创建一个文件夹data，在data文件夹中创建一个文件夹db
**第四步** ： 打开命令行，输入`mongod`

  > 32位的系统第一次启动，需要输入`mongod --storageEngine=mmapv1`

**第五步** ： 指定端口和路径
  - 在控制台启动MongoDB
  - mongod --dbpath 路径 --port 端口号
  - 例如 `mongod --dbpath C:\Users\lzh\data\db --port 123`

**第六步** ： 将MongoDB设置为系统服务

- 1. 新建文件夹 `mkdir C:\data\log`
- 2. 创建配置文件 `C:\Program Files\MongoDB\Server\4.0\bin`